"use strict";angular.module("uiApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/contact",{templateUrl:"views/contact.html",controller:"ContactCtrl"}).otherwise({templateUrl:"views/404.html",controller:"ErrorCtrl"})}]).run(["$rootScope","notificationsService",function(a,b){a.$on("$routeChangeStart",function(){b.stopLoading(),b.removeMessage()})}]),angular.module("uiApp").controller("IndexCtrl",["$scope","pageService",function(a,b){b.setApplicationName("Heroku"),a.page=b}]),angular.module("uiApp").controller("MainCtrl",["$scope","pageService",function(a,b){b.setPageName("Main")}]),angular.module("uiApp").controller("AboutCtrl",["$scope","$http","pageService","apiCallerService",function(a,b,c,d){c.setPageName("About"),d.watchDestroyed(a),d.get(a,"/api/wait/2000",d.API_CONSTANTS.SUCCESS,function(b){a.message=b.message})}]),angular.module("uiApp").controller("ContactCtrl",["$scope","pageService","apiCallerService",function(a,b,c){b.setPageName("Contact"),c.watchDestroyed(a),c.get(a,"/api/expeted/failure",c.API_CONSTANTS.SUCCESS)}]),angular.module("uiApp").controller("ErrorCtrl",["$scope","pageService",function(a,b){b.setPageName("Error")}]),angular.module("uiApp").controller("NotificationsCtrl",["$scope","notificationsService",function(a,b){a.notifications=b}]),angular.module("uiApp").service("pageService",function(){this.applicationName=void 0,this.pageName=void 0,this.loading=!1,this.setApplicationName=function(a){this.applicationName=a},this.setPageName=function(a){this.pageName=a},this.getTitle=function(){var a="";return this.pageName&&(a+=this.pageName),this.pageName&&this.applicationName&&(a+=" - "),this.applicationName&&(a+=this.applicationName),a}}),angular.module("uiApp").service("notificationsService",["$timeout",function(a){this.MESAGE_TYPE={NONE:0,INFO:1,ERROR:2},this.message=void 0,this.type=this.MESAGE_TYPE.NONE,this.loading=!1,this.isLoading=function(){return this.loading},this.startLoading=function(){this.loading=!0,this.message=void 0,this.type=this.MESAGE_TYPE.NONE},this.stopLoading=function(){if(this.loading){var b=this;a(function(){b.loading=!1},100)}},this.isInfo=function(){return this.type===this.MESAGE_TYPE.INFO},this.isError=function(){return this.type===this.MESAGE_TYPE.ERROR},this.getMessage=function(){return this.message},this.addInfo=function(a){this.message=a,this.type=this.MESAGE_TYPE.INFO,this.loading=!1},this.addError=function(a){this.message=a,this.type=this.MESAGE_TYPE.ERROR,this.loading=!1},this.removeMessage=function(){this.message=void 0,this.type=this.MESAGE_TYPE.NONE}}]),angular.module("uiApp").service("apiCallerService",["$http","notificationsService",function(a,b){this.API_CONSTANTS={UNKNOWN:0,SUCCESS:1,PROCESSING:2,ERROR_UNKNOWN:100,ERROR_API_NOT_FOUND:110,ERROR_PARAMETER_MISSING:120,ERROR_PARAMETER_WRONG_VALUE:121},this.watchDestroyed=function(a){a.$on("$destroy",function(){a.destroyed=!0})},this.handleError=function(a){b.addError(a.result&&a.message?"The following error occurred during the current operation: "+a.message:"An unknown error occurred during the current operation")},this.get=function(c,d,e,f,g){var h=this;b.startLoading();try{a.get(d).success(function(a){if(!c.destroyed){if(!a.result||a.result!==e)return void g(a,200);b.stopLoading(),f&&f(a)}}).error(function(a,d){c.destroyed||(b.stopLoading(),g?g(a,d):h.handleError(a,d))})}catch(i){b.stopLoading()}}}]);